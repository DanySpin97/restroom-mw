# @restroom-mw/core

This package is where the main magic happens.

Listen to endpoints and look for the contracts in the right place.

It manages also the [lifecycle hooks](/architecture?id=lifecycle-hooks) system.

## Usage

Import

```js
const core = require("@restroom-mw/core");
```

and plug

```js
var app = express();
app.use("/api/*", core);
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [Restroom](#restroom)
    -   [Parameters](#parameters)
    -   [onInit](#oninit)
        -   [Parameters](#parameters-1)
    -   [onBefore](#onbefore)
        -   [Parameters](#parameters-2)
    -   [onSuccess](#onsuccess)
        -   [Parameters](#parameters-3)
    -   [onAfter](#onafter)
        -   [Parameters](#parameters-4)
    -   [onError](#onerror)
        -   [Parameters](#parameters-5)
    -   [onException](#onexception)
        -   [Parameters](#parameters-6)
    -   [onFinish](#onfinish)
        -   [Parameters](#parameters-7)

### Restroom

[packages/core/src/restroom.js:13-90](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L13-L90 "Source code on GitHub")

#### Parameters

-   `req` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** express req object
-   `res` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** express res object

**Meta**

-   **copyright**: 2020 Dyne.org

-   **author**: Puria Nafisi Azizi &lt;puria@dyne.org> @pna
-   **license**: AGPL-3.0-only

    Main class that will allow to define promise hooks and
    save \`data\` between different middlewares

#### onInit

[packages/core/src/restroom.js:33-35](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L33-L35 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onInit lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onBefore

[packages/core/src/restroom.js:42-44](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L42-L44 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onBefore lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onSuccess

[packages/core/src/restroom.js:51-53](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L51-L53 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onSuccess lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onAfter

[packages/core/src/restroom.js:60-62](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L60-L62 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onAfter lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onError

[packages/core/src/restroom.js:69-71](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L69-L71 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onError lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onException

[packages/core/src/restroom.js:78-80](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L78-L80 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onException lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onFinish

[packages/core/src/restroom.js:87-89](https://github.com/dyne/restroom-mw/blob/132c41935160e5d3ff7ba8641096796e219bdc9f/packages/core/src/restroom.js#L87-L89 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onFinish lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 
