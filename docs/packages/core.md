# @restroom-mw/core

This package is where the main magic happens.

Listen to endpoints and look for the contracts in the right place.

It manages also the [lifecycle hooks](/architecture?id=lifecycle-hooks) system.

## Usage

Import

```js
const core = require("@restroom-mw/core");
```

and plug

```js
var app = express();
app.use("/api/*", core);
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [Restroom](#restroom)
    -   [Parameters](#parameters)
    -   [onInit](#oninit)
        -   [Parameters](#parameters-1)
    -   [onBefore](#onbefore)
        -   [Parameters](#parameters-2)
    -   [onSuccess](#onsuccess)
        -   [Parameters](#parameters-3)
    -   [onAfter](#onafter)
        -   [Parameters](#parameters-4)
    -   [onError](#onerror)
        -   [Parameters](#parameters-5)
    -   [onException](#onexception)
        -   [Parameters](#parameters-6)
    -   [onFinish](#onfinish)
        -   [Parameters](#parameters-7)

### Restroom

[packages/core/src/restroom.ts:13-89](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L13-L89 "Source code on GitHub")

#### Parameters

-   `req` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** express req object
-   `res` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** express res object

**Meta**

-   **copyright**: 2020 Dyne.org

-   **author**: Puria Nafisi Azizi &lt;puria@dyne.org> @pna
-   **license**: AGPL-3.0-only

    Main class that will allow to define promise hooks and
    save \`data\` between different middlewares

#### onInit

[packages/core/src/restroom.ts:32-34](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L32-L34 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onInit lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onBefore

[packages/core/src/restroom.ts:41-43](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L41-L43 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onBefore lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onSuccess

[packages/core/src/restroom.ts:50-52](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L50-L52 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onSuccess lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onAfter

[packages/core/src/restroom.ts:59-61](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L59-L61 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onAfter lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onError

[packages/core/src/restroom.ts:68-70](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L68-L70 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onError lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onException

[packages/core/src/restroom.ts:77-79](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L77-L79 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onException lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

#### onFinish

[packages/core/src/restroom.ts:86-88](https://github.com/dyne/restroom-mw/blob/e8c83938c64086af2ab5ca85b7c450487b355b1d/packages/core/src/restroom.ts#L86-L88 "Source code on GitHub")

-   **See: [lifecycle](/architecture?id=lifecycle-hooks)
    **

Saves the promise to be executed at the onFinish lifecycle step

##### Parameters

-   `promise` **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 
